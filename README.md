## 关于
资料汇总

## AWK ##
语法：
`awk [选项参数] '{pattern + action}' {filenames}`或` awk 'pattern {action}'`       
  
awk通常以文件的一行为处理单位，以空格为默认处理单位。

pattern表示awk在数据中查找的内容。   
action表示找到匹配内容后所执行的命令。

-----
### 调用方式：
1.命令行: `awk [-F  field-separator]  'commands'  input-file(s)`   
 
其中，commands 是真正awk命令，[-F域分隔符]是可选的。 input-file(s) 是待处理的文件。
在awk中，文件的每一行中，由域分隔符分开的每一项称为一个域。通常，在不指名-F域分隔符的情况下，默认的域分隔符是空格。

2.使用-f选项调用awk程序。将一段awk程序写入一个文本文件，然后在awk命令行中用-f选项调用并执行这段程序.  

`awk [选项参数] -f scriptfile var=value file(s)`

### 内置变量:   
	ARGC               命令行参数个数
	ARGV               命令行参数排列
	ENVIRON            支持队列中系统环境变量的使用
	FILENAME           awk浏览的文件名
	FNR                浏览文件的记录数
	FS                 设置输入域分隔符，等价于命令行 -F选项
	NF                 浏览记录的域的个数	
	NR                 已读的记录数
	OFS                输出域分隔符
	ORS                输出记录分隔符
	RS                 控制记录分隔符
>$0表示整条记录，$1表示当前行的第一个域，$2表示当前行第二个域，以此类推。

### awk脚本基本结构  
`awk 'BEGIN{ print "start" } pattern{ commands } END{ print "end" }' file`

BEGIN语句块在awk开始从输入流中读取行之前被执行，这是一个可选的语句块，比如变量初始化、打印输出表格的表头等语句通常可以写在BEGIN语句块中。   
END语句块在awk从输入流中读取完所有的行之后即被执行，比如打印所有行的分析结果这类信息汇总都是在END语句块中完成，它也是一个可选语句块。   
pattern语句块中的通用命令是最重要的部分，它也是可选的。如果没有提供pattern语句块，则默认执行{ print }，即打印每一个读取到的行，awk读取的每一行都会执行该语句块。


### print和printf ###
awk中同时提供了print和printf两种打印输出的函数。

其中print函数的参数可以是变量、数值或者字符串。字符串必须用双引号引用，参数用逗号分隔。如果没有逗号，参数就串联在一起而无法区分。这里，逗号的作用与输出文件的分隔符的作用是一样的，只是后者是空格而已。
>在awk的print语句块中双引号是被当作拼接符使用,例如：  
>echo | awk '{ var1="v1"; var2="v2"; var3="v3"   
>print var1"="var2"="var3; }' v1=v2=v3


printf函数，其用法和c语言中printf基本相似,可以格式化字符串,输出复杂时，printf更加好用，代码更易懂。

### 常用命令选项 ###

	-F fs fs指定输入分隔符，fs可以是字符串或正则表达式，如-F: 
	-v var=value 赋值一个用户定义变量，将外部变量传递给awk 
	-f scripfile 从脚本文件中读取awk命令










































----------
### sort ###
sort 命令对 File 参数指定的文件中的行排序，并将结果写到标准输出。如果 File 参数指定多个文件，那么 sort 命令将这些文件连接起来，并当作一个文件进行排序。   

	[root@www ~]# sort [-fbMnrtuk] [file or stdin]
	选项与参数：
	-f  ：忽略大小写的差异，例如 A 与 a 视为编码相同；
	-b  ：忽略最前面的空格符部分；
	-M  ：以月份的名字来排序，例如 JAN, DEC 等等的排序方法；
	-n  ：使用『纯数字』进行排序(默认是以文字型态来排序的)；
	-r  ：反向排序；
	-u  ：就是 uniq ，相同的数据中，仅出现一行代表；
	-t  ：分隔符，默认是用 [tab] 键来分隔；
	-k  ：以那个区间 (field) 来进行排序的意思

### uniq ###
uniq命令可以去除排序过的文件中的重复行，因此uniq经常和sort合用。也就是说，为了使uniq起作用，所有的重复行必须是相邻的。

	[root@www ~]# uniq [-icu]
	选项与参数：
	-i   ：忽略大小写字符的不同；
	-c  ：进行计数
	-u  ：只显示唯一的行

### cut ###
cut命令可以从一个文本文件或者文本流中提取文本列。   
	
	[root@www ~]# cut -d'分隔字符' -f fields <==用于有特定分隔字符
	[root@www ~]# cut -c 字符区间            <==用于排列整齐的信息
	选项与参数：
	-d  ：后面接分隔字符。与 -f 一起使用；
	-f  ：依据 -d 的分隔字符将一段信息分割成为数段，用 -f 取出第几段的意思；
	-c  ：以字符 (characters) 的单位取出固定字符区间；

### wc ###
统计文件里面有多少单词，多少行，多少字符。    

	[root@www ~]# wc [-lwm]
	选项与参数：
	-l  ：仅列出行；
	-w  ：仅列出多少字(英文单字)；
	-m  ：多少字符；
示例：  
  
	ubuntu@VM-202-118-ubuntu:~$ wc /tmp/test/dump.txt   
	51  187 1939 /tmp/test/dump.txt  
51是行数，187是单词数，1939是字节数

### sed ###
SED是一项Linux指令，功能同awk类似，差别在于，sed简单，对列处理的功能要差一些。  
调用sed命令有两种形式：  

	sed [options] 'command' file(s)
	sed [options] -f scriptfile file(s)

命令：

	a\ 在当前行下面插入文本。 
	i\ 在当前行上面插入文本。 
	c\ 把选定的行改为新的文本。 
	d 删除，删除选择的行。 
	D 删除模板块的第一行。 
	s 替换指定字符 
	h 拷贝模板块的内容到内存中的缓冲区。 
	H 追加模板块的内容到内存中的缓冲区。 
	g 获得内存缓冲区的内容，并替代当前模板块中的文本。 
	G 获得内存缓冲区的内容，并追加到当前模板块文本的后面。 
	l 列表不能打印字符的清单。 
	n 读取下一个输入行，用下一个命令处理新的行而不是用第一个命令。 
	N 追加下一个输入行到模板块后面并在二者间嵌入一个新行，改变当前行号码。 
	p 打印模板块的行。 
	P(大写) 打印模板块的第一行。 
	q 退出Sed。 
	b lable 分支到脚本中带有标记的地方，如果分支不存在则分支到脚本的末尾。 
	r file 从file中读行。 
	t label if分支，从最后一行开始，条件一旦满足或者T，t命令，将导致分支到带有标号的命令处，或者到脚本的末尾。 
	T label 错误分支，从最后一行开始，一旦发生错误或者T，t命令，将导致分支到带有标号的命令处，或者到脚本的末尾。 
	w file 写并追加模板块到file末尾。 
	W file 写并追加模板块的第一行到file末尾。 
	! 表示后面的命令对所有没有被选定的行发生作用。 
	= 打印当前行号码。 
	\# 把注释扩展到下一个换行符以前。

替换标记：

	g 表示行内全面替换。 
	p 表示打印行。 
	w 表示把行写入一个文件。 
	x 表示互换模板块中的文本和缓冲区中的文本。 
	y 表示把一个字符翻译为另外的字符（但是不用于正则表达式） 
	\1 子串匹配标记 
	& 已匹配字符串标记

元字符集：  

	^ 匹配行开始，如：/^sed/匹配所有以sed开头的行。 
	$ 匹配行结束，如：/sed$/匹配所有以sed结尾的行。 
	. 匹配一个非换行符的任意字符，如：/s.d/匹配s后接一个任意字符，最后是d。 
	* 匹配0个或多个字符，如：/*sed/匹配所有模板是一个或多个空格后紧跟sed的行。 
	[] 匹配一个指定范围内的字符，如/[ss]ed/匹配sed和Sed。 
	[^] 匹配一个不在指定范围内的字符，如：/[^A-RT-Z]ed/匹配不包含A-R和T-Z的一个字母开头，紧跟ed的行。 
	\(..\) 匹配子串，保存匹配的字符，如s/\(love\)able/\1rs，loveable被替换成lovers。 
	& 保存搜索字符用来替换其他字符，如s/love/**&**/，love这成**love**。 \< 匹配单词的开始，如:/\ 匹配单词的结束，如/love\>/匹配包含以love结尾的单词的行。 
	x\{m\} 重复字符x，m次，如：/0\{5\}/匹配包含5个0的行。 
	x\{m,\} 重复字符x，至少m次，如：/0\{5,\}/匹配至少有5个0的行。 
	x\{m,n\} 重复字符x，至少m次，不多于n次，如：/0\{5,10\}/匹配5~10个0的行。







